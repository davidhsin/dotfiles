set-option -sg escape-time 10

set-option -g focus-events on

set -g default-terminal "screen-256color"

set -ag terminal-overrides ",screen-256color:RGB"

# plugins 用於在 tmux 的狀態欄中顯示系統記憶體和 CPU 負載信息。先不裝
# set -g @plugin 'thewtex/tmux-mem-cpu-load'

# Remap prefix to C-a, uh.. C-z better for me :)
# 因為要配合Ctrl-a Ctrl-e 游標移至行首與行尾
# OK
set -g prefix 'C-z'

unbind-key C-b
unbind-key C-a

## 要brew install gnu-sed否則會出現以下錯誤  
## /Users/dah/.tmux.conf:21: no current target
## /Users/dah/.tmux.conf:22: no current target 
## no current target
# swap-pane -U  
# swap-pane -D

# 将快捷键设置为 Ctrl-a + Shift-u
# bind-key u swap-pane -U
# bind-key v swap-pane -D


## open windows in same directory
bind '"' split-window -c "#{pane_current_path}"

#-h指的是水平拆分視窗，新的視窗會在當前視窗的右邊
bind % split-window -h -c "#{pane_current_path}" 
bind c new-window -c "#{pane_current_path}"

# 更改 tmux 中的模式鍵（mode-keys）為 Vi（Vi 風格）。
# vi-like keybindings
set-window-option -g mode-keys vi

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# mouse passthrough
set -g mouse on

# 取消在複製模式下滑鼠拖動結束的預設動作。在複製模式下，通常用滑鼠進行選擇和複製文本。這個指令將取消結束拖動的預設行為，可能是為了重新定義這個滑鼠操作的功能。
unbind -T copy-mode MouseDragEnd1Pane

set-option -g set-titles on
set-option -g set-titles-string "Terminal"

bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

# status bar config
set-option -g status on
set-option -g status-interval 1
set-option -g status-justify centre
set-option -g status-keys vi
set-option -g status-position bottom 
set-option -g status-style fg=colour136,bg=colour235
set-option -g status-left-length 20
set-option -g status-left-style default
set-option -g status-left "#[fg=green,bright]#(whoami)#[default]"
set-option -g status-right-length 140
set-option -g status-right-style default
set-option -g status-right "#[fg=green,bg=default,bright]#(tmux-mem-cpu-load -a 0) "
set-window-option -g window-status-style fg=colour244
set-window-option -g window-status-style bg=default
set-window-option -g window-status-current-style fg=colour166
set-window-option -g window-status-current-style bg=default




# end-of-line (vi: $) (emacs: C-e)
#         Move the cursor to the end of the line.

# 補充資料：https://github.com/pi314/pi314.notes/blob/main/tmux.rst
# 重新讀取設定檔
# tmux source-file ~/.tmux.conf

# 關閉所有sessions
# tmux kill-server

# 補充：ctrl z + space 可以切換成左右或上下




## bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"：
## 這個指令的作用是在複製模式下，當滑鼠拖動結束時，執行一個特定的動作。具體來說：
## bind-key -T copy-mode-vi：這個部分是將下一個指令綁定到 tmux 的複製模式（copy-mode）下的 Vi 風格。
## MouseDragEnd1Pane：這個部分表示在滑鼠拖動結束時觸發的事件。在這個情況下，是滑鼠拖動結束的事件。
## send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"：
## 這個部分定義了當滑鼠拖動結束時要執行的操作。它會將選擇的文本使用 copy-pipe-and-cancel 命令複製到系統剪貼板，
## 然後使用 reattach-to-user-namespace pbcopy 將文本傳送到 macOS 的剪貼板（如果你正在使用 macOS）。
## 這樣可以實現在 tmux 中選擇文本並將其複製到系統剪貼板的功能。
